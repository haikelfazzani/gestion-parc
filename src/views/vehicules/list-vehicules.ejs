<% include ../partials/head %>

<% include ../partials/menu %>

<div class="container mt-5 mb-3">

  <div class="row">
    <div class="col-md-4">
      <% include left-menu %>
    </div>

    <div class="col-md-8">

      <% if(locals.data) { 
        let i = 1;
        if(locals.etatQuery) {
          data = data.filter(d => d.etat === etatQuery)
        }
      %>

      <h2>Liste des v√©hicules
        <span class="badge badge-primary"><%= data.length %>
        </span>
      </h2>

      <% if(locals.Etat) { %>
      <div class="d-flex flex-row-reverse mb-2">
        <% for(let e in Etat) { %>
        <a href="/vehicules/list?etatQuery=<%= Etat[e] %>" class="mr-2">
          <span class="badge badge-primary"><%= Etat[e] %></span>
        </a>
        <% } %>
      </div>
      <% } %>

      <table class="table table-hover table-light">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Num serie</th>
            <th scope="col">Model</th>
            <th scope="col">Etat</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>


          <% for(let v of data) { %>
          <tr>
            <td><%= i++ %></td>
            <td><%= v.num_serie %></td>
            <td><%= v.model %></td>
            <td><%= v.etat %></td>

            <td>
              <a href="/vehicules/modifier?v=<%= v.num_serie %>" class="btn btn-success">
                Modifier
              </a>

              <a href="/vehicules/supprimer?v=<%= v.num_serie %>" class="btn btn-danger">
                Supprimer
              </a>

            </td>

          </tr>
          <% } %>

        </tbody>
      </table>

    </div>
    <% } %>

  </div>

</div>

<% include ../partials/footer %>