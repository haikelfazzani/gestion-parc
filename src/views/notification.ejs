<% include partials/head %>

<% include partials/menu %>

<div class="container mt-5 mb-5">


    <div class="row">

        <div class="col-md-4">
            <div class="alert alert-light" role="alert">
                A simple primary alertâ€”check it out!
            </div>
        </div>

        <div class="col-md-8">
            <h2><i class="fas fa-bell"></i> Notifications</h2>
            <div class="list-group" id="list-notifications"></div>
        </div>

    </div>

</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        fetch("http://localhost:3000/notifications/read")
            .then(res => res.json())
            .then(data => {

                const listNotifs = document.getElementById("list-notifications");
                if (data && data.length > 0) {

                    data = data.reverse();

                    for (let d of data) {
                        listNotifs.innerHTML += `
                
                        <a href="/reservations/list-demands" class="list-group-item list-group-item-action">
                            <i class="fas fa-bookmark mr-3"></i> ${d.message}
                            <span class="badge badge-info" style="float:right">
                                ${d.date_notif}
                            </span>
                        </a>
            
                        `;
                    }
                }
            })
            .catch(err => console.log(err));
    });
</script>

<% include partials/footer %>